<app-client-dashboard-header
  [pageName]="'Archive'"
></app-client-dashboard-header>
<div class="content">
  <div class="inner-dashbaord px-3 pt-3 pb-4">
    <div class="row">
      <div class="col-lg-3 pr-2 serach d-none">
        <div>
          <img
            src="../../../../assets/images/search.svg"
            class="searching-icon"
          />
          <form-field>
            <input
              type="text"
              placeholder="Searching..."
              class="form-control font-family"
            />
          </form-field>
        </div>
      </div>
      <div class="col-lg-2 pr-md-2  cursor">
        <div>
          <img
            src="../../../../assets/images/fillter-date.svg"
            class="filter-icon"
          />

          <div class="filter-date">
            <input
              type="text"
              [(ngModel)]="archivedDate"
              [max]="maxDate"
              (dateChange)="getArchiveList()"
              (click)="startDate.open()"
              readonly
              placeholder="Filter by Date"
              [matDatepicker]="startDate"
              class="form-control"
            />
            <img
              *ngIf="!archivedDate"
              class="form-append mr-2 icon-set"
              (click)="startDate.open()"
              src="../../../../assets/images/arrow-down.svg"
              alt=""
            />
            <img
              *ngIf="archivedDate"
              class="form-append mr-2"
              (click)="archivedDate = ''; getArchiveList()"
              src="../../../../assets/images/close-icon.svg"
              alt=""
            />
            <mat-datepicker #startDate></mat-datepicker>
          </div>
        </div>
      </div>
      <div class="col-lg-2 pr-2">
        <div class="se">
          <img
            *ngIf="!archivedType"
            src="../../../../assets/images/fillter-date.svg"
            class="filter-icon custom-height"
          />
          <img
            *ngIf="archivedType"
            (click)="archivedType = ''; getArchiveList()"
            src="../../../../assets/images/close-icon.svg"
            class="filter-icon"
          />
          <div class="Filter-status ml-zero ml-right">
            <form-field>
              <mat-select
                [(ngModel)]="archivedType"
                (selectionChange)="getArchiveList()"
                class="form-control filter-status1"
                placeholder="Filter by Status"
              >
                <mat-option value="openAndScan">Open for scan</mat-option>
                <mat-option value="forward">Forward</mat-option>
                <mat-option value="holdForPickup">Hold for pickup</mat-option>
              </mat-select>
            </form-field>
          </div>
        </div>
      </div>
    </div>
    <div class="" *ngIf="archivedList && archivedList.length > 0 && !isLoading">
      <div
        class="inbox-card-mailbox pb-4 new-border-archive mt-2 pt-2"
        *ngFor="let data of archivedList; let i = index"
      >
        <div class="row">
          <div class="col-lg-12">
            <div class="row">
              <div class="col-lg-7">
                <div class="inbox-card">
                  <div class="inbox-img">
                    <!-- <img [src]="data?.labelLink" /> -->
                    <img
                      *ngIf="getImageName(data?.labelLink) != 'pdf'"
                      [src]="data?.labelLink"
                    />
                    <iframe
                      class="iframeClass"
                      *ngIf="getImageName(data?.labelLink) == 'pdf'"
                      [src]="
                        sanitizer.bypassSecurityTrustResourceUrl(
                          data?.labelLink
                        )
                      "
                    ></iframe>
                    <span class="zoom-icon">
                      <img
                        (click)="viewImg(data)"
                        src="../../../../../assets/images/zoom-icon.svg"
                      />
                    </span>
                  </div>
                </div>
              </div>
              <div class="col-lg-5 inbox-padding">
                <div class="main-inbox">
                  <div class="date-div">
                    <span class="font-14">{{
                      data?.updatedAt | date : "EEEE , MM-dd-YYYY"
                    }}</span>
                    <span class="font-12">Archived On</span>
                    <p *ngIf="data?.labelOriginType=='package'" class="font-12">Storage date: {{data?.storageDate|
                      date:'EEEE , MM-dd-YYYY'}}</p>
                  </div>
                  <div class="Unread ml-auto">
                    <button _ngcontent-ywb-c306="" class="btn in-Archived">
                      Archived
                    </button>
                  </div>
                </div>
                <div *ngIf="data?.lastActionAdmin != 'labelDelivered'">
                  <div class="following-action pt-4">
                    <p class="font-12">You submitted this items as :</p>
                  </div>
                  <div class="send-trash pt-1 pb-3">
                    <div
                      class="open-scan cursor"
                      [ngClass]="{
                        forward: data?.action == 'forward',
                        holdForPickup: data?.action == 'holdForPickup'
                      }"
                    >
                      <!-- <p class=""><img src="../../../../../assets/images/forward.svg">Forward</p> -->
                      <p *ngIf="data?.action == 'openAndScan'" class="">
                        <img
                          src="../../../../../assets/images/barcode-identification.png"
                        />Open and scan
                      </p>
                      <p *ngIf="data?.action == 'forward'" class="">
                        <img
                          src="../../../../../assets/images/forward.svg"
                        />Forward
                      </p>
                      <span
                        *ngIf="data?.action == 'holdForPickup'"
                        class="text-dark"
                        >Hold for pickup
                      </span>
                      <p
                        *ngIf="data?.lastActionUser == 'planSelected'"
                        class=""
                      >
                        <img
                          src="../../../../../assets/images/forward.svg"
                        />Forward
                      </p>
                    </div>
                    <div class="my-2 mx-3">
                      <span
                        *ngIf="data?.action == 'holdForPickup'"
                        class="text-dark"
                        >Your code is: {{ data?.code }}
                      </span>
                    </div>
                  </div>
                  <div class="send-trash pt-4">
                    <!-- Click on the invoice tab to pay the unpaid invoice to have this mail forwarded. -->
                    <sapn *ngIf="data?.lastActionUser == 'planSelected' && !data?.forwardLabelSuccess">
                      You have selected
                      {{ getName(data?.selectedForwardMailCharges?.name) }} and
                      price is $
                      {{ data?.selectedForwardMailCharges?.price }}.</sapn
                    >
                    <div *ngIf="data?.lastActionUser == 'planSelected' && data?.forwardLabelSuccess">
                      <span *ngIf="data?.forwardLabelSuccess">Your shipment date is : {{data?.forwardLabelDeliveryDate| date : "EEEE , MM-dd-YYYY"}} </span>
                      <p *ngIf="data?.forwardLabelSuccess && data?.forwardLabelTrackingNumber">Your Tracking # is: {{data?.forwardLabelTrackingNumber}} </p>
                    </div>
                    <button
                      *ngIf="
                        data?.lastActionUser != 'planSelected' &&
                        !data?.childLabels?.length
                      "
                      class="create-btn red"
                      (click)="makeRequestChange(data)"
                    >
                      Request to make change
                    </button>
                    <button
                      *ngIf="
                        data?.lastActionUser == 'forwardLabelRequest' &&
                        data?.childLabels?.length
                      "
                      class="create-btn red"
                      (click)="cancelMultipleForward(data)"
                    >
                      cancel
                    </button>
                  </div>
                </div>
                <div
                  class="align-center justify-center height-60"
                  *ngIf="data?.lastActionAdmin == 'labelDelivered'"
                >
                  <div class="send-trash pt-4">
                    <button class="create-btn green">
                      <!-- Delivered -->
                      Picked up
                    </button>
                  </div>
                </div>
                <p class="text-center" *ngIf="data?.lastActionAdmin == 'labelDelivered'">Picked up date is : {{data?.updatedAt| date:'short'}}</p>
              </div>
              <!-- <div class="following-action pt-4">
                            <p class="font-12">Please select one of the following action</p>
                              <div class="action-perfom">
                                  <div class="open-scan mr-3 cursor"><p class=""><img src="../../../../../assets/images/barcode-identification.png">Open and scan</p></div>
                                  <div class="Forward cursor">  <p class=""><img src="../../../../../assets/images/forward.svg">Forward</p></div>
                                  <div class="hold mr-3 cursor">  <p class=""><img src="../../../../../assets/images/home-delivery-icon.svg">Hold for pickup</p></div>
                                  <div class="mail cursor" (click)="notMyMail(data?.id)">  <p class=""><img src="../../../../../assets/images/mail.svg">Not my mail</p></div>
                                   </div>
                        </div>
                        <div class="send-trash pt-4 justify-center">
                        <button (click)="sendToTrash(data?.id)" class="btn bnt-trash cursor"><img
                            src="../../../../../assets/images/send-trash.svg" class="send-tras">Send to trash</button>
                        </div> -->
              <div class="last-updated pt-3"></div>
            </div>
          </div>
        </div>
      </div>
    </div>
    <div
      class="col-lg-12 noRequest"
      *ngIf="archivedList && archivedList.length == 0 && !isLoading"
    >
      <span> No Data found</span>
    </div>
  </div>

  <!-- <div class="inbox-card-mailbox pb-4 new-border-archive mb-2 mt-3">
                <div class="row">
                 <div class="col-12">                
                    <div class="row">
                        <div class="col-lg-7">
                         <div  class="inbox-card">
                         <div class="inbox-img">
                        <img src="../../../../../assets/images/fba.png" />
                        <span class="zoom-icon">
                            <img src="../../../../../assets/images/zoom-icon.svg" />
                        </span>  
                       </div>
                      </div>
                    </div>
                    <div class="col-lg-5 inbox-padding">
                        <div class="main-inbox">
                            <div class="date-div">
                                <span class="font-14">Monday, Dec 05,2022</span>
                                <span class="font-12">Archived On</span>
                            </div>
                            <div class="Unread ml-auto">
                                <button _ngcontent-ywb-c306="" class="btn in-Archived">Archived</button>
                            </div>
                        </div>
                        <div class="following-action pt-4">
                            <p class="font-12">You submitted this item as:</p>                              
                                 </div>
                                 <div class="send-trash pt-1 pb-3">
                                    <div class="Forward cursor">  <p class=""><img src="../../../../../assets/images/forward.svg" />Forward</p></div>
                                 </div>    
                                 <div class="send-trash pt-4 justify-center">
                                    <button class="create-btn red">Request to make a change</button>
                                 </div>                               
                             </div>
                        </div>                      
                   </div>
                </div>
                </div>
        
            <div class="inbox-card-mailbox pb-4 new-border-archive mt-3">
                <div class="row">
                 <div class="col-12">                
                    <div class="row">
                        <div class="col-lg-7">
                         <div  class="inbox-card">
                         <div class="inbox-img">
                        <img src="../../../../../assets/images/fba.png" />
                        <span class="zoom-icon">
                            <img src="../../../../../assets/images/zoom-icon.svg" />
                        </span>  
                       </div>
                      </div>
                    </div>
                    <div class="col-lg-5 inbox-padding">
                        <div class="main-inbox">
                            <div class="date-div">
                                <span class="font-14">Monday, Dec 05,2022</span>
                                <span class="font-12">Archived On</span>
                            </div>
                            <div class="Unread ml-auto">
                                <button _ngcontent-ywb-c306="" class="btn in-Archived">Archived</button>
                            </div>
                        </div>
                        <div class="following-action pt-4">
                            <p class="font-12">You submitted this item as:</p>                              
                                 </div>
                                 <div class="send-trash pt-1 pb-3">
                                    <div class="Forward cursor"> 
                                        <p class=""><img src="../../../../../assets/images/forward.svg">Forward</p></div>
                                 </div>    
                                 <div class="send-trash pt-4 justify-center">
                                    <button class="create-btn red">Request to make a change</button>
                                 </div>                         
                             </div>
                        </div>                      
                   </div>
                </div>
            </div>    -->
  <!-- </div> -->
</div>
